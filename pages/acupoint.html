<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <base href="../">
    <title>ç©´ä½æŸ¥è¯¢ - ä¸­åŒ»å…»ç”Ÿ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/common.css">
    <style>
        .search-section {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            padding: 20px 16px;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
        }
        
        .search-box input {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 25px;
            font-size: 15px;
            outline: none;
        }
        
        .search-box button {
            width: 46px;
            height: 46px;
            border: none;
            border-radius: 50%;
            background: white;
            color: var(--primary);
            font-size: 18px;
            cursor: pointer;
        }
        
        .symptom-tags {
            padding: 16px;
            background: white;
        }
        
        .tags-title {
            font-size: 13px;
            color: var(--text-light);
            margin-bottom: 10px;
        }
        
        .tags-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .symptom-tag {
            padding: 8px 14px;
            background: #f5f5f5;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .symptom-tag:hover {
            background: #e8f5e9;
            color: var(--primary);
        }
        
        .results {
            padding: 16px;
            display: none;
        }
        
        .results.show {
            display: block;
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .result-header h2 {
            font-size: 18px;
            color: var(--text);
        }
        
        .close-btn {
            padding: 8px 16px;
            background: #f5f5f5;
            border: none;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
        }
        
        .point-card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .point-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .point-name {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .point-meridian {
            font-size: 12px;
            color: var(--text-light);
            background: #f5f5f5;
            padding: 4px 10px;
            border-radius: 10px;
        }
        
        .point-location {
            background: #e8f5e9;
            padding: 12px;
            border-radius: 10px;
            font-size: 13px;
            margin-bottom: 12px;
        }
        
        .point-effects {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .effect-tag {
            background: #fff3e0;
            color: #e65100;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
        }
        
        .diet-section {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px dashed #eee;
        }
        
        .diet-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text);
        }
        
        .diet-items {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .diet-item {
            background: #e3f2fd;
            color: #1565c0;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
        }
        
        .massage-tip {
            background: #fce4ec;
            padding: 12px;
            border-radius: 10px;
            font-size: 13px;
            margin-top: 12px;
            color: #c2185b;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-light);
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        .match-hint {
            background: #fff8e1;
            padding: 10px 14px;
            border-radius: 10px;
            font-size: 13px;
            margin-bottom: 16px;
            color: #f57c00;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-with-back">
            <a href="index.html" class="back-home"><i class="fas fa-chevron-left"></i> é¦–é¡µ</a>
            <h1>ğŸ¯ ç©´ä½æŸ¥è¯¢</h1>
        </div>
        <p>æŒ‰ç—‡çŠ¶æœç´¢å¯¹åº”ç©´ä½</p>
    </div>
    
    <div class="search-section">
        <div class="search-box">
            <input type="text" id="search-input" placeholder="è¾“å…¥ç—‡çŠ¶ï¼Œå¦‚ï¼šå¤´ç—›ã€å¤±çœ ã€é¢ˆæ¤ç—›...">
            <button onclick="searchSymptom()"><i class="fas fa-search"></i></button>
        </div>
    </div>
    
    <div class="symptom-tags">
        <div class="tags-title">ğŸ”¥ å¸¸è§ç—‡çŠ¶</div>
        <div class="tags-grid">
            <span class="symptom-tag" onclick="selectSymptom('å¤´ç—›')">å¤´ç—›</span>
            <span class="symptom-tag" onclick="selectSymptom('å¤±çœ ')">å¤±çœ </span>
            <span class="symptom-tag" onclick="selectSymptom('é¢ˆæ¤ç—›')">é¢ˆæ¤ç—›</span>
            <span class="symptom-tag" onclick="selectSymptom('èƒƒç—›')">èƒƒç—›</span>
            <span class="symptom-tag" onclick="selectSymptom('è…°ç—›')">è…°ç—›</span>
            <span class="symptom-tag" onclick="selectSymptom('æ„Ÿå†’')">æ„Ÿå†’</span>
            <span class="symptom-tag" onclick="selectSymptom('ä¾¿ç§˜')">ä¾¿ç§˜</span>
            <span class="symptom-tag" onclick="selectSymptom('æœˆç»ä¸è°ƒ')">æœˆç»ä¸è°ƒ</span>
            <span class="symptom-tag" onclick="selectSymptom('çœ¼ç–²åŠ³')">çœ¼ç–²åŠ³</span>
            <span class="symptom-tag" onclick="selectSymptom('è‚©å‘¨ç‚')">è‚©å‘¨ç‚</span>
            <span class="symptom-tag" onclick="selectSymptom('é«˜è¡€å‹')">é«˜è¡€å‹</span>
            <span class="symptom-tag" onclick="selectSymptom('æ¶ˆåŒ–ä¸è‰¯')">æ¶ˆåŒ–ä¸è‰¯</span>
            <span class="symptom-tag" onclick="selectSymptom('é¼»ç‚')">é¼»ç‚</span>
            <span class="symptom-tag" onclick="selectSymptom('å’³å—½')">å’³å—½</span>
            <span class="symptom-tag" onclick="selectSymptom('ç„¦è™‘')">ç„¦è™‘</span>
        </div>
    </div>
    
    <div class="results" id="results"></div>
    
    <div class="container">
        <div class="notice">
            <i class="fas fa-info-circle"></i>
            <strong>æ¸©é¦¨æç¤ºï¼š</strong>ç©´ä½æŒ‰æ‘©ä»…ä½œä¿å¥å‚è€ƒï¼Œå¦‚æœ‰ç–¾ç—…è¯·åŠæ—¶å°±åŒ»ã€‚
        </div>
    </div>
    
    <script src="js/common.js"></script>
    <script src="js/acupoint-data.js"></script>
    <script>
        function searchSymptom() {
            const input = document.getElementById('search-input').value.trim();
            if (input) {
                selectSymptom(input);
            }
        }
        
        function selectSymptom(symptom) {
            document.getElementById('search-input').value = symptom;
            
            let data = acupointData[symptom];
            let matchedSymptom = symptom;
            let isExactMatch = true;
            
            // ç²¾ç¡®åŒ¹é…å¤±è´¥ï¼Œå°è¯•åŒä¹‰è¯
            if (!data) {
                const synonyms = symptomSynonyms[symptom];
                if (synonyms) {
                    for (const syn of synonyms) {
                        if (acupointData[syn]) {
                            data = acupointData[syn];
                            matchedSymptom = syn;
                            isExactMatch = false;
                            break;
                        }
                    }
                }
            }
            
            // åŒä¹‰è¯å¤±è´¥ï¼Œå°è¯•æ¨¡ç³ŠåŒ¹é…
            if (!data) {
                for (const key in acupointData) {
                    if (key.includes(symptom) || symptom.includes(key)) {
                        data = acupointData[key];
                        matchedSymptom = key;
                        isExactMatch = false;
                        break;
                    }
                }
            }
            
            if (data) {
                renderResults(matchedSymptom, data, isExactMatch ? null : symptom);
            } else {
                showNoResults(symptom);
            }
        }
        
        function renderResults(symptom, data, originalQuery) {
            const resultsDiv = document.getElementById('results');
            
            // è·å–ç©´ä½è¯¦ç»†ä¿¡æ¯
            const pointsHtml = data.points.map(pointName => {
                const pointInfo = dailyAcupointList.find(p => p.name === pointName);
                if (pointInfo) {
                    return `
                        <div class="point-card">
                            <div class="point-header">
                                <span class="point-name">${pointInfo.name}</span>
                                <span class="point-meridian">${pointInfo.meridian}</span>
                            </div>
                            <div class="point-location">
                                <strong>ğŸ“ å®šä½ï¼š</strong>${pointInfo.location}
                            </div>
                            <div class="point-effects">
                                ${pointInfo.effects.map(e => `<span class="effect-tag">${e}</span>`).join('')}
                            </div>
                        </div>
                    `;
                }
                return `<div class="point-card"><span class="point-name">${pointName}</span></div>`;
            }).join('');
            
            resultsDiv.innerHTML = `
                <div class="result-header">
                    <h2>ğŸ©º ${symptom} - æ¨èç©´ä½</h2>
                    <button class="close-btn" onclick="hideResults()"><i class="fas fa-times"></i> å…³é—­</button>
                </div>
                
                ${originalQuery ? `<div class="match-hint">ğŸ’¡ æ ¹æ®"${originalQuery}"ä¸ºæ‚¨åŒ¹é…åˆ°"${symptom}"ç›¸å…³ç©´ä½</div>` : ''}
                
                ${pointsHtml}
                
                <div class="card">
                    <div class="diet-title">ğŸ¥— é¥®é£Ÿè°ƒç†å»ºè®®</div>
                    <div class="diet-items">
                        ${data.diet.map(d => `<span class="diet-item">${d}</span>`).join('')}
                    </div>
                    
                    <div class="massage-tip">
                        <strong>ğŸ’† æŒ‰æ‘©å»ºè®®ï¼š</strong>${data.massage}
                    </div>
                </div>
            `;
            
            resultsDiv.classList.add('show');
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        function showNoResults(symptom) {
            const resultsDiv = document.getElementById('results');
            const suggestions = Object.keys(acupointData).slice(0, 5);
            
            resultsDiv.innerHTML = `
                <div class="result-header">
                    <h2>æœç´¢ç»“æœ</h2>
                    <button class="close-btn" onclick="hideResults()"><i class="fas fa-times"></i> å…³é—­</button>
                </div>
                <div class="empty-state">
                    <i class="fas fa-search"></i>
                    <p>æœªæ‰¾åˆ°"${symptom}"ç›¸å…³çš„ç©´ä½ä¿¡æ¯</p>
                    <p style="font-size: 13px; margin-top: 10px;">è¯•è¯•è¿™äº›ï¼š${suggestions.map(s => `<span class="symptom-tag" onclick="selectSymptom('${s}')" style="margin: 4px;">${s}</span>`).join('')}</p>
                </div>
            `;
            
            resultsDiv.classList.add('show');
        }
        
        function hideResults() {
            document.getElementById('results').classList.remove('show');
        }
        
        // å›è½¦æœç´¢
        document.getElementById('search-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchSymptom();
            }
        });
    </script>
</body>
</html>
