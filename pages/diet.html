<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <base href="../">
    <title>èŠ‚æ°”é¥®é£Ÿ - ä¸­åŒ»å…»ç”Ÿ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/common.css">
    <style>
        .diet-hero {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 24px 16px;
            text-align: center;
        }
        
        .diet-name {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .diet-date {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        
        .diet-principle {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .term-selector {
            padding: 12px 16px;
            background: white;
            border-bottom: 1px solid #eee;
        }
        
        .selector-label {
            font-size: 12px;
            color: var(--text-light);
            margin-bottom: 8px;
        }
        
        .term-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        
        .term-tag {
            padding: 5px 10px;
            background: #e8f5e9;
            color: #2e7d32;
            border-radius: 12px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .term-tag:hover {
            background: #c8e6c9;
        }
        
        .term-tag.active {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }
        
        .food-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        
        .food-item {
            background: #e8f5e9;
            border-radius: 10px;
            padding: 12px 8px;
            text-align: center;
        }
        
        .food-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }
        
        .food-name {
            font-size: 12px;
            color: #2e7d32;
        }
        
        .avoid-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .avoid-tag {
            background: #ffebee;
            color: #c62828;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
        }
        
        .soup-box {
            background: linear-gradient(135deg, #fff9c4 0%, #fff59d 100%);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }
        
        .soup-icon {
            font-size: 36px;
            margin-bottom: 8px;
        }
        
        .soup-name {
            font-size: 18px;
            font-weight: 600;
            color: #f57f17;
        }
        
        .soup-label {
            font-size: 12px;
            color: #f9a825;
            margin-top: 4px;
        }
        
        .desc-box {
            background: #f5f5f5;
            border-left: 3px solid #11998e;
            padding: 12px;
            border-radius: 0 8px 8px 0;
            font-size: 14px;
            line-height: 1.6;
            color: var(--text);
        }
        
        .season-indicator {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 12px;
        }
        
        .season-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
        }
        
        .season-dot.spring { background: #4caf50; }
        .season-dot.summer { background: #ff9800; }
        .season-dot.autumn { background: #ff5722; }
        .season-dot.winter { background: #2196f3; }
        .season-dot.active { box-shadow: 0 0 0 3px rgba(255,255,255,0.5); }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-with-back">
            <a href="index.html" class="back-home"><i class="fas fa-chevron-left"></i> é¦–é¡µ</a>
            <h1>ğŸ¥— èŠ‚æ°”é¥®é£Ÿ</h1>
        </div>
        <p id="date-display"></p>
    </div>
    
    <div class="term-selector">
        <div class="selector-label">é€‰æ‹©èŠ‚æ°”ï¼ˆå½“å‰å·²é«˜äº®ï¼‰ï¼š</div>
        <div class="term-tags" id="term-tags"></div>
    </div>
    
    <div id="diet-content"></div>
    
    <div class="container">
        <div class="notice">
            <i class="fas fa-info-circle"></i>
            <strong>æ¸©é¦¨æç¤ºï¼š</strong>é¥®é£Ÿå»ºè®®ä»…ä¾›å‚è€ƒï¼Œè¯·æ ¹æ®ä¸ªäººä½“è´¨å’Œå¥åº·çŠ¶å†µè°ƒæ•´ã€‚
        </div>
    </div>
    
    <script src="js/common.js"></script>
    <script src="js/diet-data.js"></script>
    <script>
        let currentTermIndex = 0;
        
        const foodIcons = {
            'éŸ­èœ': 'ğŸ¥¬', 'è±†èŠ½': 'ğŸŒ±', 'é¦™æ¤¿': 'ğŸŒ¿', 'è èœ': 'ğŸ¥¬',
            'å±±è¯': 'ğŸ¥”', 'è–ç±³': 'ğŸŒ¾', 'çº¢æ£': 'ğŸ«˜', 'è²å­': 'ğŸ«˜',
            'æ¢¨': 'ğŸ', 'è èœ': 'ğŸ¥¬', 'èŠ¹èœ': 'ğŸ¥¬', 'èŠèŠ±': 'ğŸŒ¼',
            'æ˜¥ç¬‹': 'ğŸ‹', 'è±Œè±†': 'ğŸ«›', 'é“¶è€³': 'ğŸ„', 'ç™¾åˆ': 'ğŸŒ¸',
            'å†¬ç“œ': 'ğŸ¥’', 'èµ¤å°è±†': 'ğŸ«˜', 'é²«é±¼': 'ğŸŸ', 'æ‰è±†': 'ğŸ«˜',
            'è‹¦ç“œ': 'ğŸ¥’', 'ç»¿è±†': 'ğŸ«˜', 'è¥¿ç“œ': 'ğŸ‰', 'é»„ç“œ': 'ğŸ¥’',
            'è¥¿çº¢æŸ¿': 'ğŸ…', 'ä¸ç“œ': 'ğŸ¥’', 'è·å¶': 'ğŸƒ', 'è–„è·': 'ğŸŒ¿',
            'è²è—•': 'ğŸ¥”', 'èŠéº»': 'ğŸ«˜', 'æ ¸æ¡ƒ': 'ğŸ¥œ', 'èœ‚èœœ': 'ğŸ¯',
            'ç³¯ç±³': 'ğŸš', 'ä¹³å“': 'ğŸ¥›', 'æŸ¿å­': 'ğŸŠ', 'æ —å­': 'ğŸŒ°',
            'èåœ': 'ğŸ¥•', 'ç¾Šè‚‰': 'ğŸ–', 'ç‰›è‚‰': 'ğŸ¥©', 'é¸¡è‚‰': 'ğŸ—',
            'ç‹—è‚‰': 'ğŸ–', 'é¹¿è‚‰': 'ğŸ–', 'é¥ºå­': 'ğŸ¥Ÿ', 'æ±¤åœ†': 'ğŸ¡',
            'ç”Ÿå§œ': 'ğŸ«š', 'å¤§æ£': 'ğŸ«˜', 'æ¡‚åœ†': 'ğŸ«˜', 'è‘¡è„': 'ğŸ‡',
            'æ¸æ': 'ğŸ«˜', 'å½“å½’': 'ğŸŒ¿'
        };
        
        function init() {
            document.getElementById('date-display').textContent = getTodayString();
            
            // æ‰¾åˆ°å½“å‰èŠ‚æ°”
            const currentTerm = getCurrentSolarTerm();
            currentTermIndex = dietData.findIndex(d => d.name === currentTerm.name);
            if (currentTermIndex === -1) currentTermIndex = 0;
            
            renderTermTags();
            renderDiet();
        }
        
        function renderTermTags() {
            const container = document.getElementById('term-tags');
            container.innerHTML = dietData.map((term, i) => `
                <span class="term-tag ${i === currentTermIndex ? 'active' : ''}" onclick="switchTerm(${i})">${term.name}</span>
            `).join('');
        }
        
        function switchTerm(index) {
            currentTermIndex = index;
            renderTermTags();
            renderDiet();
        }
        
        function getSeason(index) {
            if (index >= 0 && index < 6) return 'spring';
            if (index >= 6 && index < 12) return 'summer';
            if (index >= 12 && index < 18) return 'autumn';
            return 'winter';
        }
        
        function renderDiet() {
            const diet = dietData[currentTermIndex];
            const container = document.getElementById('diet-content');
            const season = getSeason(currentTermIndex);
            
            container.innerHTML = `
                <div class="diet-hero">
                    <div class="diet-name">${diet.name}</div>
                    <div class="diet-date">ğŸ“… ${diet.date}</div>
                    <div class="diet-principle">ğŸ¯ ${diet.principle}</div>
                    <div class="season-indicator">
                        <span class="season-dot spring ${season === 'spring' ? 'active' : ''}" title="æ˜¥"></span>
                        <span class="season-dot summer ${season === 'summer' ? 'active' : ''}" title="å¤"></span>
                        <span class="season-dot autumn ${season === 'autumn' ? 'active' : ''}" title="ç§‹"></span>
                        <span class="season-dot winter ${season === 'winter' ? 'active' : ''}" title="å†¬"></span>
                    </div>
                </div>
                
                <div class="container">
                    <div class="card">
                        <div class="section-title"><i class="fas fa-leaf"></i> å…»ç”Ÿè¦ç‚¹</div>
                        <div class="desc-box">${diet.desc}</div>
                    </div>
                    
                    <div class="card">
                        <div class="section-title"><i class="fas fa-carrot"></i> æ¨èé£Ÿæ</div>
                        <div class="food-grid">
                            ${diet.foods.map(f => `
                                <div class="food-item">
                                    <div class="food-icon">${foodIcons[f] || 'ğŸ¥—'}</div>
                                    <div class="food-name">${f}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="section-title"><i class="fas fa-ban"></i> å¿Œé£Ÿ</div>
                        <div class="avoid-tags">
                            ${diet.avoid.map(a => `<span class="avoid-tag">ğŸš« ${a}</span>`).join('')}
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="section-title"><i class="fas fa-mug-hot"></i> æ¨èæ±¤é¥®</div>
                        <div class="soup-box">
                            <div class="soup-icon">ğŸ²</div>
                            <div class="soup-name">${diet.soup}</div>
                            <div class="soup-label">æœ¬èŠ‚æ°”å…»ç”Ÿæ±¤å“</div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        onReady(init);
    </script>
</body>
</html>
